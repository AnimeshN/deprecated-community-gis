{% extends 'map/base.html'%}
{% load static %}
{% block content %}
{% if user.is_authenticated %}

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

<div id="side-bar" style="background-color: rgba(0, 0, 0, 0.2);">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>  

<style>
    .arrange{
        padding-top: 100px;
    }
</style>
<div class="field_wrapper arrange">
    <!-- <div>
        <input type="text" name="field_name[]" value=""/>
        <a href="javascript:void(0);" class="add_button" title="Add field">Add more</a>
    </div> -->
    <h4>Select districts according to regions : one-by-one or all. <br></h4>
    <hr>
    <div>Select Themes:
        <select class='form-control' id="amenities" >
          <option >Village Amenities</option>
          <option >Household Amenities</option>
          <option >Town Amenities</option>
          <option >Demographies</option>
          <option >Ground water recharge priorities(GSDA)</option>
          <option >Waterbodies</option>
        </select>
        <br>Select District:
         <select class='form-control' name="field_name[]" style="">
          <option value="All">All</option>
          <optgroup label="Vidarbh(East)">
              <option value="Akola">Akola</option>
              <option value="Amrawati">Amrawati</option>
              <option value="Buldana">Buldana</option>
              <option value="Yavatmal">Yavatmal</option>
              <option value="Washim">Washim</option>
          </optgroup>
          <optgroup label="Marathwada">
              <option value="Aurangabad">Aurangabad</option>
              <option value="Beed">Beed</option>
              <option value="Jalna">Jalna</option>
              <option value="Osmanabad">Osmanabad</option>
              <option value="Nanded">Nanded</option>
              <option value="Latur">Latur</option>
              <option value="Parbhani">Parbhani</option>
              <option value="Hingoli">Hingoli</option>
          </optgroup>

          <optgroup label="Kokan">
              <option value="Mumbai City">Mumbai City</option>
              <option value="Mumbai Suburban">Mumbai Suburban</option>
              <option value="Thane">Thane</option>
              <option value="Palghar">Palghar</option>
              <option value="Raigad">Raigad</option>
              <option value="Ratnagiri">Ratnagiri</option>
              <option value="Sindhudurg">Sindhudurg</option>
          </optgroup>

        <optgroup label="Vidarbh(West)">
              <option value="Bhandara">Bhandara</option>
              <option value="Gadchiroli">Gadchiroli</option>
              <option value="Chandrapur">Chandrapur</option>
              <option value="Gondia">Gondia</option>
              <option value="Nagpur">Nagpur</option>
              <option value="Wardha">Wardha</option>
          </optgroup>

            <optgroup label="Khandesh">
              <option value="Ahmednagar">Ahmednagar</option>
              <option value="Dhule">Dhule</option>
              <option value="Jalgaon">Jalgaon</option>
              <option value="Nandurbar">Nandurbar</option>
              <option value="Nashik">Nashik</option>
          </optgroup>

        
            <optgroup label="Paschim Maharashtra">
              <option value="Kolhapur">Kolhapur</option>
              <option value="Pune">Pune</option>
              <option value="Sangli">Sangli</option>
              <option value="Satara">Satara</option>
              <option value="Solapur">Solapur</option>
          </optgroup>
        </select> 



        <a href="javascript:void(0);" class="add_button" title="Add field"><button style="float: right;"><span class="glyphicon glyphicon-plus"></button></a>
    </div>
</div>

<div id = 'selectedata'></div>
<button class = 'btn btn-success' onclick="showLayers()">Show Layers</button>
<!-- <button onclick="myDistrictLayerList.forEach(clearAllLayers)">Clear All Layers</button> -->
<button class = 'btn btn-danger'onclick="clearAllLayers()">Clear All Layers</button>
{% if user.groups.all.0.name != "restricted" %}
<button class = 'btn btn-dark'onclick="downloadLayers()">Download Layer</button>
<div class="alert alert-info">
    <strong>Info!</strong> Select only single layer to download.
  </div>
  <div class="alert alert-warning">
    <strong>!</strong> Please wait downloading may take some time.
  </div>
<iframe id="my_iframe" style="display:none;"></iframe>
{% endif %}
{% if user.groups.all.0.name == "restricted" %}
<div class="alert alert-warning">
    <strong>!</strong> please register to download layers.
  </div>
{% endif%}

<script type="text/javascript">
    var x = 1; //Initial field counter is 1
$(document).ready(function(){
    var maxField = 10; //Input fields increment limitation
    var addButton = $('.add_button'); //Add button selector
    var wrapper = $('.field_wrapper'); //Input field wrapper
    var dropdown = `<select name="field_name[]" ><option value="Akola">Akola</option><option value="Amrawati">Amrawati</option></select>`;
    

    var fieldHTML = `<div>Select District:
         <select class='form-control' name="field_name[]" >
          <option value="All">All</option>
          <optgroup label="Vidarbh(East)">
              <option value="Akola">Akola</option>
              <option value="Amrawati">Amrawati</option>
              <option value="Buldana">Buldana</option>
              <option value="Yavatmal">Yavatmal</option>
              <option value="Washim">Washim</option>
          </optgroup>
          <optgroup label="Marathwada">
              <option value="Aurangabad">Aurangabad</option>
              <option value="Beed">Beed</option>
              <option value="Jalna">Jalna</option>
              <option value="Osmanabad">Osmanabad</option>
              <option value="Nanded">Nanded</option>
              <option value="Latur">Latur</option>
              <option value="Parbhani">Parbhani</option>
              <option value="Hingoli">Hingoli</option>
          </optgroup>

          <optgroup label="Kokan">
              <option value="Mumbai City">Mumbai City</option>
              <option value="Mumbai Suburban">Mumbai Suburban</option>
              <option value="Thane">Thane</option>
              <option value="Palghar">Palghar</option>
              <option value="Raigad">Raigad</option>
              <option value="Ratnagiri">Ratnagiri</option>
              <option value="Sindhudurg">Sindhudurg</option>
          </optgroup>

        <optgroup label="Vidarbh(West)">
              <option value="Bhandara">Bhandara</option>
              <option value="Gadchiroli">Gadchiroli</option>
              <option value="Chandrapur">Chandrapur</option>
              <option value="Gondia">Gondia</option>
              <option value="Nagpur">Nagpur</option>
              <option value="Wardha">Wardha</option>
          </optgroup>

            <optgroup label="Khandesh">
              <option value="Ahmednagar">Ahmednagar</option>
              <option value="Dhule">Dhule</option>
              <option value="Jalgaon">Jalgaon</option>
              <option value="Nandurbar">Nandurbar</option>
              <option value="Nashik">Nashik</option>
          </optgroup>

        
            <optgroup label="Paschim Maharashtra">
              <option value="Kolhapur">Kolhapur</option>
              <option value="Pune">Pune</option>
              <option value="Sangli">Sangli</option>
              <option value="Satara">Satara</option>
              <option value="Solapur">Solapur</option>
          </optgroup>
        </select> <a href="javascript:void(0);" class="remove_button"><button style="float: right;"><span class="glyphicon glyphicon-minus"></button></a></div>`; //New input field html 

    
    
    //Once add button is clicked
    $(addButton).click(function(){
        //Check maximum number of input fields
            x++;
            $(wrapper).append(fieldHTML); //Add field html
    });
    
    //Once remove button is clicked
    $(wrapper).on('click', '.remove_button', function(e){
        e.preventDefault();
        $(this).parent('div').remove(); //Remove field html
        x--; //Decrement field counter
    });
});
var myDistrictLayerList = [];

function showLayers(){
    var check = x;
    clearAllLayers();
    var amenity = document.getElementById('amenities').value;
    for (i = 0; i < check; i++) {
    var dis = document.getElementsByName("field_name[]")[i].value;
    addMyNewLayers(amenity,dis);
    // console.log(myDistrictLayerList);
    }

}

function downloadLayers(){
  var check = x;
    var amenity = document.getElementById('amenities').value;
    for (i = 0; i < check; i++) {
    var dis = document.getElementsByName("field_name[]")[i].value;
    downloadTheseLayers(amenity,dis);
    // console.log(myDistrictLayerList);
    }
}
//object
var listOfDistrict = ['All','Akola','Amrawati','Buldana','Yavatmal','Washim','Aurangabad','Beed','Jalna','Osmanabad','Nanded','Latur','Parbhani','Hingoli','Mumbai City','Mumbai Suburban','Thane','Palghar','Raigad','Ratnagiri','Sindhudurg','Bhandara','Gadchiroli','Gondia','Nagpur','Wardha','Ahmednagar','Dhule','Jalgaon','Nandurbar','Nashik','Kolhapur','Pune','Sangli','Satara','Solapur'];

var villageLayerCode = ['geonode:village_2700','geonode:v_akola','geonode:v_amravati','geonode:v_buldana','geonode:v_yavatmal','geonode:v_washim','geonode:v_aurangabad','','geonode:v_jalna','geonode:v_osmanabad','geonode:v_nanded','geonode:v_latur','geonode:v_parbhani','geonode:v_hingoli','','','geonode:v_thane','','','geonode:v_ratnagiri','geonode:v_sindhudurg','geonode:v_bhandara','geonode:v_gadchiroli','','geonode:v_nagpur','geonode:v_wardha','','geonode:v_dhule','geonode:v_jalgaon','geonode:v_nandurbar','geonode:v_nashik','geonode:v_kolhapur','geonode:v_pune','geonode:v_sangli','geonode:v_satara','geonode:v_solapur'];
var houseLayerCode = ['','','','geonode:h_buldhana','geonode:h_yavatmal','geonode:h_washim','','geonode:h_beed','','geonode:h_osmanabad','geonode:h_nanded','','geonode:h_parbhani','','geonode:h_mumbai city','geonode:h_mumbai suburban','geonode:h_thane','geonode:h_palghar','geonode:h_raigarh','geonode:h_ratnagiri','geonode:h_sindhudurg','','','geonode:h_gondia','geonode:h_nagpur','geonode:h_wardha','','','','geonode:h_nandurbar','geonode:h_nashik','','geonode:h_pune','geonode:h_sangli','geonode:h_satara','geonode:h_solapur'];



var districtLat = [19.0760,20.7002,20.9374,20.4561,20.3888,20.1390,19.8762,18.9891,19.8297,18.2070,19.1383,18.4088,19.2644,19.5781,19.0176,19.1538,19.2183,19.6936,18.5158,16.9902,16.3492,21.0736,19.4969,21.4624,21.1458,20.7453,19.0948,20.9042,21.0077,21.7469,19.9975,16.7050,18.5204,16.8524,17.6805,17.6805,];
var districtLong = [72.8777,77.0082,77.7796,76.3637,78.1204,77.1025,75.3433,75.7601,75.8800,76.1784,77.3210,76.5604,76.6413,77.1025,72.8561,72.8752,72.9781,72.7655,73.1822,73.3120,73.5594,79.8297,80.2767,80.2210,79.0882,78.6022,74.7480,74.7749,75.5626,74.1240,73.7898,74.2433,73.8567,74.5815,74.0183,74.0183,];
var districtZoom = [7,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9];

var townLayerCode= ['','','geonode:t_amravati','','geonode:t_yavatmal','','','geonode:t_beed','geonode:t_jalna','geonode:t_osmanabad','geonode:t_nanded','geonode:t_latur','geonode:t_parbhani','geonode:t_hingoli','','','geonode:t_thane','geonode:t_palghar','geonode:t_raigarh','geonode:t_ratnagiri','geonode:t_sindhudurg',' ',' ','geonode:t_gondiya','geonode:t_nagpur','geonode:t_wardha',' ',' ','geonode:t_jalgoan','geonode:t_nandurbar','geonode:t_nashik','geonode:t_kolhapur','geonode:t_pune','geonode:t_sangli','geonode:t_satara','geonode:t_solapur',];


var demoLayerCode = ['','geonode:d_akola_1','geonode:d_amravati_1','geonode:d_buldhana_1','geonode:d_yavatmal','geonode:d_washim_1','geonode:d_aurangabad','geonode:d_beed_1','geonode:d_jalna_1','geonode:d_osmanabad','geonode:d_nanded_1','geonode:d_latur_1','','geonode:d_hingoli_1','geonode:d_mumbai_city_1','geonode:d_mumbai_suburban_1','geonode:d_thane','geonode:d_palghar','geonode:d_raigarh_1','geonode:d_ratnagiri_1','geonode:d_sindhudurg_1','geonode:d_bhandara_1','geonode:d_gadchiroli','geonode:d_gondia_1','geonode:d_nagpur_1','geonode:d_wardha_1','geonode:d_ahmadnagar_1','geonode:d_dhule_1','geonode:d_jalgaon_1','geonode:d_nandurbar_2','geonode:d_nashik_1','geonode:d_kolhapur','geonode:d_pune_1','geonode:d_sangli_1','','geonode:d_solapur_1'];

function clearAllLayers(){
    for (var i = myDistrictLayerList.length - 1; i >= 0; i--) {
        source.getLayer(myDistrictLayerList[i]).addTo(mymap).remove(mymap);;
        
    }
 

}
function addMyNewLayers(amenity,dis){
   var index = listOfDistrict.indexOf(dis);
   mymap.setView([districtLat[index], districtLong[index]], districtZoom[index]);
  

  if(amenity == 'Village Amenities'){
    if(villageLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
        source.getLayer(villageLayerCode[index]).addTo(mymap);
        myDistrictLayerList.push(villageLayerCode[index]);
        }
    }
    else if(amenity == 'Household Amenities'){
    if(houseLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
        source.getLayer(houseLayerCode[index]).addTo(mymap);
        myDistrictLayerList.push(houseLayerCode[index]);
        } 
    }

    else if(amenity == 'Town Amenities'){
    if(townLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
        source.getLayer(townLayerCode[index]).addTo(mymap);
        myDistrictLayerList.push(townLayerCode[index]);
        }  
    }
    else if(amenity == 'Demographies'){
    if(demoLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
        source.getLayer(demoLayerCode[index]).addTo(mymap);
        myDistrictLayerList.push(demoLayerCode[index]);
        } 
    }

    else{
    alert('Data for '+amenity+' not Populated');
    }
   

}
function removeMyNewLayers(amenity,dis){
   var index = listOfDistrict.indexOf(dis);
   source.getLayer(villageLayerCode[index]).addTo(mymap).remove(mymap);;

}

function downloadTheseLayers(anemity,dis){
  var index = listOfDistrict.indexOf(dis);
  var geonodecode = '';
  if (anemity == 'Village Amenities'){
    if(villageLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
    geonodecode = villageLayerCode[index];
    }
}
  
  else if(anemity == 'Town Amenities'){
    if(townLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
    geonodecode = townLayerCode[index];
    }
}
  
  else if(anemity == 'Demographies'){
    if(demoLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
    geonodecode = demoLayerCode[index];
    }
}
    
    
else if(anemity == 'Household Amenities'){
    if(houseLayerCode[index] == ''){
        alert('layer of '+ dis + ' not found');
    }else{
    geonodecode = houseLayerCode[index];
    }
}

    else{
    alert('Data for '+anemity+' not Populated');
    }
   if (geonodecode != ''){
    var code = geonodecode.substring(8, );
    url = "http://13.82.229.27/geoserver/wfs?format_options=charset%3AUTF-8&typename=geonode%3A"+code+"&outputFormat=SHAPE-ZIP&version=1.0.0&service=WFS&request=GetFeature&";
    window.open(url,code); 
   }
   

}
</script>
</div>
        <!-- /view -->
        <script>
        // menu();
        </script>
        </div>
    <div id="mapdiv" class="col-md-12"></div>
<script>
    var mymap;
                var lyrOSM;
                var lyrWatercolor;
                var lyrTopo;
                var lyrImagery;
                var lyrOutdoors;
                // var lyrChapultepec;
                var mrkCurrentLocation;
                var popZocalo;
                var ctlAttribute;
                var ctlScale;
                var ctlPan;
                var ctlZoomslider;
                var ctlMouseposition;
                var ctlMeasure;
                var ctlEasybutton;
                var ctlSidebar;
                var ctlSearch;
                var ctlLayers;
                var objBasemaps;
                var objOverlays;
                var building, roads,primarys,districtL,wardl,ddwl,buildseg,corporatorwise,buildcomp,buildweight,compseg,punebuild,puneroad,punephotos;
                var pondahl,pondasl,pondawl,pondafl,pondaol,pondalinelyr,pondapointlyr,pondapolygonlyr,voter_list;
                var psl,pgl,pbul,pbl,lwardbl,raill,pondl,polyl,osmbl,mrll,hvll,bfrl,bfhvll,villagel,hlpcal,townl;
                var mokhadavl;

                var source = L.wms.source(
                    "http://13.82.229.27/geoserver/wfs",
                    {
                        "format": "image/png",
                        "transparent": "true"
                    }        
                    );
                
                $(document).ready(function(){

                    $("#add-district").on("click", function() {  
                        $("#textboxDiv").append('<input type="textbox">');  
                    });  
                    $("#remove-district").on("click", function() {  
                        $("#textboxDiv").children().last().remove();  
                    });

                     $('#text').hide();
        
                         $("#driver").click(function() {
                         $('#text').toggle();
                         });

                         $('#upload').on('click', function() {
        var file_data = $('#fileToUpload').prop('files')[0];   
        var form_data = new FormData();                  
        form_data.append('fileToUpload', file_data);
        // alert(form_data);                             
        $.ajax({
            url: 'upload.php', // point to server-side PHP script 
            dataType: 'text',  // what to expect back from the PHP script, if anything
            cache: false,
            contentType: false,
            processData: false,
            data: form_data,                         
            type: 'post',
            success: function(php_script_response){
                alert(php_script_response); // display response from the PHP script, if any
            }
            
         });
    });
                    mymap = L.map('mapdiv', {center:[19.0760, 72.8777], zoom:13, zoomControl:false, attributionControl:false});
                    lyrOSM = L.tileLayer.provider('OpenStreetMap.Mapnik');
                    // lyrTopo = L.tileLayer.provider('OpenTopoMap');
                    lyrImagery = L.tileLayer.provider('Esri.WorldImagery');
                    // lyrOutdoors = L.tileLayer.provider('Thunderforest.Outdoors');
                    // lyrWatercolor = L.tileLayer.provider('Stamen.Watercolor');
                    mymap.addLayer(lyrOSM);
                    
                    // lyrChapultepec = L.imageOverlay('img/chapultepec.png', [[19.42993,-99.20843],[19.40621,-99.17453]], {opacity:0.5}).addTo(mymap);
                    
                    objBasemaps = {
                        "Open Street Maps": lyrOSM,
                        // "Topo Map":lyrTopo,
                        "Imagery":lyrImagery
                        // "Outdoors":lyrOutdoors,
                        // "Watercolor":lyrWatercolor
                    };
                    
                    objOverlays = {
                        // "Chapultepec Image":lyrChapultepec
                    };
                    
                    ctlLayers = L.control.layers(objBasemaps, objOverlays).addTo(mymap);
                    
                    ctlPan = L.control.pan().addTo(mymap);
                    ctlZoomslider = L.control.zoomslider({position:'topright'}).addTo(mymap);
                    
                    // ctlMeasure = L.control.polylineMeasure().addTo(mymap);
                    ctlSidebar = L.control.sidebar('side-bar').addTo(mymap);
                    
                    ctlEasybutton = L.easyButton('glyphicon-transfer', function(){
                       ctlSidebar.toggle(); 
                    }).addTo(mymap);

                    $("#closebutton").click(function(){
                        ctlSidebar.toggle();
                    });

                    var helloPopup = L.popup().setContent('<h1>About US</h1><br><i>Primary objective of communitygis is to provide educational platform for learners to learn about spatial information and learn how these  modern tools can be used to solve real life problems. <br/><br/>It creates a platform for people who range from those who can contribute data ( mobile based point data collection to digitization of published maps) to those who can analyse the data to infer useful social knowledge.                    <br/><br/>It is a digital contraption needed to collect, aggregate , access and analyse data  finally provide decision support for to manipulate reality.                    <br/><br/>Since all source code is published , under GPL, any one can reproduce the technology , without any permission from makerGHAT.This has been created by volunteers and coordinated by www.makerghat.org<i>');

                    L.easyButton('glyphicon glyphicon-question-sign', function(btn, map){
                        helloPopup.setLatLng(map.getCenter()).openOn(mymap);
                    }).addTo(mymap);

                    
                    ctlSearch = L.Control.openCageSearch({key: '3c38d15e76c02545181b07d3f8cfccf0',limit: 10}).addTo(mymap);
                    
                    ctlAttribute = L.control.attribution({position:'bottomleft'}).addTo(mymap);
                    ctlAttribute.addAttribution('OSM');
                    ctlAttribute.addAttribution('&copy; <a href="http://www.makerghat.org">makerGHAT</a>');

                    // ctlLogo = L.control.attribution({position:'bottomright'}).addTo(mymap);
                    
                    ctlScale = L.control.scale({position:'bottomleft', metric:false, maxWidth:200}).addTo(mymap);
                    ctlMouseposition = L.control.mousePosition().addTo(mymap);
                    
                    popZocalo = L.popup({maxWidth:200,keepInView:true});
                    popZocalo.setLatLng([19.43262, -99.13325]);
                    popZocalo.setContent("<h2>Zocalo</h2><img src='img/zocalo.jpg' width='200px'>");
                    
                    mymap.on('contextmenu', function(e) {
                        var dtCurrentTime = new Date();
                        L.marker(e.latlng).addTo(mymap).bindPopup(e.latlng.toString()+"<br>"+dtCurrentTime.toString());
                    });
                    
                    mymap.on('keypress', function(e) {
                        if (e.originalEvent.key=="l") {
                            mymap.locate();
                        }
                    });

                    // var credctrl = L.controlCredits({
                    //     image: "img/logo.png",
                    //     link: "http://www.makerghat.org/",
                    //     text: "Interactive mapping<br/>by makerGhat"
                    // }).addTo(mymap);


                    // var myIcon = L.icon({
                    //     iconUrl: 'img/logo.png',
                    //     iconSize: [38, 95],
                    //     iconAnchor: [22, 94],
                    //     popupAnchor: [-3, -76],
                        
                    // });
                    // L.marker([50.505, 30.57], {icon: myIcon}).addTo(mymap);

                    setTimeout(function () {
                        credctrl.setText("Interactive mapping<br/>by GreenInfo Network");
                    }, 5000);
                    mymap.on('locationfound', function(e) {
                        console.log('buildin');
                        // if (mrkCurrentLocation) {
                        //     mrkCurrentLocation.remove();
                        // }
                        // mrkCurrentLocation = L.circle(e.latlng, {radius:e.accuracy/2}).addTo(mymap);
                        // mymap.setView(e.latlng, 14);
                    });
                    
                    mymap.on('locationerror', function(e) {
                        console.log(e);
                        alert("Location was not found");
                    })
                    
                    mymap.on('zoomend', function(){
                        $("#zoom-level").html(mymap.getZoom());
                    });
                    
                    mymap.on('moveend', function(){
                        $("#map-center").html(LatLngToArrayString(mymap.getCenter()));
                    });
                    
                    mymap.on('mousemove', function(e){
                        $("#mouse-location").html(LatLngToArrayString(e.latlng));
                    });
                    
                    $("#buildingLocate").click(function(){
                        addBuildingLayer();
                    });

                    $("#buildseg").click(function(){
                        addBuildsegLayer();
                    });

                     $("#buildcomp").click(function(){
                        addBuildcompLayer();
                    });

                     $("#buildweight").click(function(){
                        addBuildweightLayer();
                    });

                     $("#corporatorwise").click(function(){
                        addCorporatorLayer();
                    });

                     $("#compseg").click(function(){
                        addCorporatorSegLayer();
                    });

                    $("#roadLayer").click(function(){
                        addRoadLayer();
                    });
                    
                    $("#punebuild").click(function(){
                        addPuneBuild();
                    });

                    $("#puneroad").click(function(){
                        addPuneRoad();
                    });
                     $("#punephotos").click(function(){
                        addPunePhotos();
                    });
                    
                    $("#primary_school").click(function(){
                        addPrimaryLayer();
                    });

                    $("#district_layer").click(function(){
                        addDistrictLayer();
                    });

                    $("#ward_layer").click(function(){
                        addWardLayer();
                    });

                    $("#village_layer").click(function(){
                        addVillageLayer();
                    });

                    $("#hlpca").click(function(){
                        addHLPCALayer();
                    });

                    $("#town2700_layer").click(function(){
                        addTown2700Layer();
                    });

                    $("#bfhvl_layer").click(function(){
                        addBFHVLLayer();
                    });

                    $("#bfr_layer").click(function(){
                        addBFRLayer();
                    });

                    $("#hvl_layer").click(function(){
                        addHVLLayer();
                    });addLayer

                    $("#mrl_layer").click(function(){
                        addMRLLayer();
                    });

                     $("#voter_list").click(function(){
                        addVoterList();
                    });

                    $("#osmb_layer").click(function(){
                        addOSMBLayer();
                    });

                    $("#poly_layer").click(function(){
                        addPolyLayer();
                    });

                    $("#pond_layer").click(function(){
                        addPondLayer();
                    });

                    $("#railway_layer").click(function(){
                        addRailLayer();
                    });

                    $("#lward_building_layer").click(function(){
                        addLWardBuildingLayer();
                    });

                    $("#pads_boundary").click(function(){
                        addPadsBoundaryLayer();
                    });

                    $("#pads_building").click(function(){
                        addPadsBuildingLayer();
                    });

                    $("#pads_garden").click(function(){
                        addPadsGardenLayer();
                    });

                    $("#pads_street").click(function(){
                        addPadsStreetLayer();
                    });


                    $("#locatemumbai").click(function(){
                        mymap.setView([19.0607, 72.8362], 13);
                        // mymap.openPopup(popZocalo);
                    });

                    $("#voter_list").click(function(){
                        mymap.setView([19.1733144,72.9337851], 17);
                        // mymap.openPopup(popZocalo);
                    });

                     $("#locatepune").click(function(){
                        mymap.setView([18.5938053,73.7911109], 17);
                        // mymap.openPopup(popZocalo);
                    });

                    $("#locategoa").click(function(){
                        mymap.setView([15.2993, 74.1240], 11);
                        // mymap.openPopup(popZocalo);
                    });

                    $("#locateponda").click(function(){
                        mymap.setView([15.3991, 74.0124], 15);
                        // mymap.openPopup(popZocalo);
                    });

                    

                    $("#locatepalghar").click(function(){
                        mymap.setView([19.9365, 73.3404], 11);
                        // mymap.openPopup(popZocalo);
                    });

                    $("#sward").click(function(){
                        mymap.setView([19.1197, 72.9051], 15);
                        // mymap.openPopup(popZocalo);
                    });

                    $("#lward").click(function(){
                        mymap.setView([19.08799, 72.88656], 15);
                        // mymap.openPopup(popZocalo);
                    });

                    $("#pads").click(function(){
                        mymap.setView([19.1197, 72.9051], 15);
                        // mymap.openPopup(popZocalo);
                    });

                    $("#ponda_lines").click(function(){
                        addPondaLinesLayer();
                    });

                    $("#ponda_polygons").click(function(){
                        addPondaPolygonsLayer();
                    });

                    $("#ponda_points").click(function(){
                        addPondaPointsLayer();
                    });

                    $("#ponda_hospital").click(function(){
                        addPondaHospitalLayer();
                    });
                    $("#ponda_school").click(function(){
                        addPondaSchoolLayer();
                    });
                    $("#ponda_worship").click(function(){
                        addPondaWorshipLayer();
                    });
                    $("#ponda_food").click(function(){
                        addPondaFoodLayer();
                    });
                    $("#ponda_other").click(function(){
                        addPondaOtherLayer();
                    });

                     $("#mokhada_village").click(function(){
                        addMokhadaVillageLayer();
                    });
                    
                    $("#sldOpacity").on('change', function(){
                        $("#image-opacity").html(this.value);
                        lyrChapultepec.setOpacity(this.value);
                    });
                }); //end of ready function
               

                function LatLngToArrayString(ll) {
    //                console.log(ll);
                    return "["+ll.lat.toFixed(5)+", "+ll.lng.toFixed(5)+"]";
                }

                function addMokhadaVillageLayer(){
                    console.log('this is mokhada village layer');
                    if(mokhadavl){
                        mokhadavl.remove(mymap);
                        mokhadavl = 0;
                    }else{
                        mokhadavl = source.getLayer("geonode:mokhada_village_boundary").addTo(mymap);
                    }
                    
                }

                function addPondaLinesLayer(){
                    console.log('this is pondalines');
                    if(pondalinelyr){
                        pondalinelyr.remove(mymap);
                        pondalinelyr = 0;
                    }else{
                        pondalinelyr = source.getLayer("geonode:ponda_goa_polylines").addTo(mymap);
                    }
                    
                }

                function addPondaPolygonsLayer(){
                    console.log('this is pondapolygon');
                    if(pondapolygonlyr){
                        pondapolygonlyr.remove(mymap);
                        pondapolygonlyr = 0;
                    }else{
                        pondapolygonlyr = source.getLayer("geonode:ponda_goa_polygons_1").addTo(mymap);
                    }
                    
                }

                function addPondaPointsLayer(){
                    console.log('this is pondapoint');
                    if(pondapointlyr){
                        pondapointlyr.remove(mymap);
                        pondapointlyr = 0;
                    }else{
                        pondapointlyr = source.getLayer("geonode:ponda_goa_points").addTo(mymap);
                    }
                    
                }

                function addBuildingLayer(){
                    console.log('this is building');
                    if(building){
                        building.remove(mymap);
                        building = 0;
                    }else{
                        building = source.getLayer("geonode:buildings_in_hwest").addTo(mymap);
                    }
                    
                }

                function addCorporatorLayer(){
                    console.log('this is corporatorwise ');
                    if(corporatorwise){
                        corporatorwise.remove(mymap);
                        corporatorwise = 0;
                    }else{
                        corporatorwise = L.geoJSON.ajax('data/corporator_boundries.geojson', {
                         //pointToLayer: returnCompMarker, filter:filterComp
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);
                    }
                    
                }
                function addCorporatorSegLayer(){
                    console.log('this is corporator Segeregation');
                    if(compseg){
                        compseg.remove(mymap);
                        compseg = 0;
                    }else{
                        compseg = L.geoJSON.ajax('data/corporator_boundries.geojson', {
                         pointToLayer: returnCorpsegMarker
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);
                    }
                    
                }

                function addBuildsegLayer(){
                    console.log('this is fulcrum data ');
                    if(buildseg){
                        buildseg.remove(mymap);
                        buildseg = 0;
                    }else{
                       buildseg = L.geoJSON.ajax('data/swm_hwest/swm_hwest.geojson', {
                         pointToLayer: returnEagleMarker, filter:filterEagle
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);

                    }
                    
                }

                function addBuildcompLayer(){
                    console.log('this is fulcrum data ');
                    if(buildcomp){
                        buildcomp.remove(mymap);
                        buildcomp = 0;
                    }else{
                       buildcomp = L.geoJSON.ajax('data/swm_hwest/swm_hwest.geojson', {
                         pointToLayer: returnCompMarker, filter:filterComp
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);

                    }
                    
                }

                function addBuildweightLayer(){
                    console.log('this is fulcrum data ');
                    if(buildweight){
                        buildweight.remove(mymap);
                        buildweight = 0;
                    }else{
                       buildweight = L.geoJSON.ajax('data/swm_hwest/swm_hwest.geojson', {
                         pointToLayer: returnWeightMarker
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);

                    }
                    
                }

                function polystyle(feature) {
        return {
            fillColor: 'red',
            weight: 2,
            opacity: 1,
            color: 'white',  //Outline color
            fillOpacity: 0.7
        };
    }

                function addPuneBuild(){
                    console.log('this is pune building data ');
                    if(punebuild){
                        punebuild.remove(mymap);
                        punebuild = 0;
                    }else{
                       punebuild = L.geoJSON.ajax('data/pune_buildings_new.geojson', {
                         style: polystyle,

                        onEachFeature: function (feature, layer) {
                            layer.bindPopup('Building Name: '+feature.properties.bldg_name+ "<br />No. of Buildings: "+feature.properties.flats+"<br/>No. of Rowhouses: "+feature.properties.rowhouses+"<br/>Levels of Segregation: "+feature.properties.level_seg+"(Dry/Wet)<br/><b>Are there any locations inside the society for disposing other types of waste</b><br/>Ewaste: "+feature.properties.ewaste+"<br/>Glass: "+feature.properties.glass+"<br/>Plastic: "+feature.properties.plastic+"<br/>Sanitary Waste: "+feature.properties.sanitary+"<br/>Coconut Waste: "+feature.properties.coconut+"<br/>In-house Composting: "+feature.properties.composting+"<br/>N P K H Values: "+feature.properties.n_p_k_h+"<br/>Approx Trees in Society: "+feature.properties.trees+"<br/>No of Gardens / Play / Open Spaces in Society: "+feature.properties.open_space+"<br/>Is Compost Available for Sale: "+feature.properties.comp_sale+"<br/>Bird Conservation: "+feature.properties.b_consrv+"<br/>Tree Conservation: "+feature.properties.t_consrv+"<br/>STP Plant: "+feature.properties.stp_plant);
                          }
                         // pointToLayer: returnPuneBuildMarker
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);

                    }
                    
                }

                function addVoterList(){
                    console.log('this is voter list data ');
                    if(punebuild){
                        punebuild.remove(mymap);
                        punebuild = 0;
                    }else{
                       punebuild = L.geoJSON.ajax('voter_list/mulund_geo.geojson', {
                         //style: polystyle,

                        onEachFeature: function (feature, layer) {
                            layer.bindPopup('Building Name: प्रभागाचा परिसर : <br/>यादी भाग क्र.२ ६ १ : १ … पुष्पलोक ड्रीमलेंड, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : १० … स्नेहा ड्रीमलेंड, गुरु गोविंद सिंगमार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : १ १ … पुष्पा कुटीर, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : १२ … कृष्णा निवास, गुरुगोविंद सिंग मानी मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : १३ … विक्रम, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : १४ … अशियाना,गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, यादी भाग क्र की ६ १ : १ ५ … गणेश बाग, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, यादी भाग क्र की ६ १ : १६ …रवीकुंजन, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : १७ … यशीधन, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ :१ ८ … अमर निवास, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : १९ … छोकरा निवास, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, यादीभाग क्र की ६ १ : २ … ड्रीमलेंड, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : २० … आशिर्वाद, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम,<br/>यादी भाग क्र.२ ६ १ : २१ … सिंग निवास, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, यादी भाग क्र की ६ १ : २२ … पितृछाया, गुरु गोविंद सिंग मार्ग, मुलुडपश्चिम, यादी भाग क्र की ६ १ : २३ … मातृछाया ड्रीमलेंड, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : २४ … केंद्रीय कर्मचारीसोसायटी ड्रीमलेंडच्या बाजुला, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, यादी भाग क्र की ६ १ : २५ … हायलेंड पली, गुरु गोविंद सिंग मार्ग, मुलुडपश्चिम, यादी भाग क्र की ६ १ : २६ … बी… १ हायलेंड अपार्टमेंट, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, यादी भाग क्र की ६ १ : २७ … सी… १ हायलेंडअपार्टमेंट, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : २८ … रचना गार्डन डेंफोडील सोसायटी, गुरु गोविंद सिंग मार्ग, मुलुडपश्चिम, यादी भाग क्र की ६ १ : २९ … अमरनगर मुलुड कॉलनी, गुरु गोविंद सिंग मार्ग, मुलुड पश्चिम, यादी भाग क्र की ६ १ : में … अंबे निवास, गुरुगोविंद सिंग मानी मुलुड पश्चिम, <br/>यादी भाग क्र.२ ६ १ : ३० … एफ हायलेंड पाती, दर्गा रोड, मुलुड पश्चिम, यादी भाग क्र की ६ १ : में १ … सी… १');
                          }
                         // pointToLayer: returnPuneBuildMarker
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);

                    }
                    
                }

                function addPuneRoad(){
                    console.log('this is fulcrum data ');
                    if(puneroad){
                        puneroad.remove(mymap);
                        puneroad = 0;
                    }else{
                       puneroad = L.geoJSON.ajax('data/pune_roads_geo.geojson', {
                         pointToLayer: returnPuneRoadMarker
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);

                    }
                    
                }
                function addPunePhotos(){
                    console.log('this is pune photos ');
                    if(punephotos){
                        punephotos.remove(mymap);
                        punephotos = 0;
                    }else{
                       punephotos = L.geoJSON.ajax('data/latest_pune_photos.geojson', {
                         pointToLayer: returnPunePhotosMarker
                         // filter: function(feature, layer) {   
                         //     return (feature.properties.society_name === "Amber");
                         //   }
                      }).addTo(mymap);

                    }
                    
                }
                

                function addRoadLayer(){
                    console.log('Road');
                    if(roads){
                        roads.remove(mymap);
                        roads =0;
                    }else{
                        roads = source.getLayer("geonode:road_in_grid").addTo(mymap);
                    }
                   
                    
                }

                function addPrimaryLayer(){
                    console.log('primary layer');
                    if(primarys){
                        primarys.remove(mymap);
                        primarys =0;
                    }else{
                        primarys = source.getLayer("geonode:school_may310").addTo(mymap);
                    }  
                }

                function addDistrictLayer(){
                    console.log('District layer');
                    mymap.setZoom(7);
                    if(districtL){
                        districtL.remove(mymap);
                        districtL =0;
                    }else{
                        districtL = source.getLayer("geonode:district_boundaries_of_maharashtra").addTo(mymap);
                    }  
                }

                function addWardLayer(){
                    console.log('Ward layer');
                    mymap.setZoom(10);
                    if(wardl){
                        wardl.remove(mymap);
                        wardl =0;
                    }else{
                        wardl = source.getLayer("geonode:mumbai_ward_boundary").addTo(mymap);
                    }  
                }
                

                function addVillageLayer(){
                    console.log('Village layer');
                    mymap.setZoom(7);
                    if(villagel){
                        villagel.remove(mymap);
                        villagel =0;
                    }else{
                        villagel = source.getLayer("geonode:village_2700").addTo(mymap);
                    }  
                }

                
                function addHLPCALayer(){
                    console.log('HLPCA layer');
                    mymap.setZoom(7);
                    if(hlpcal){
                        hlpcal.remove(mymap);
                        hlpcal =0;
                    }else{
                        hlpcal = source.getLayer("geonode:hlpca").addTo(mymap);
                    }  
                }

                function addTown2700Layer(){
                    console.log('Town 2700 layer');
                    mymap.setZoom(7);
                    if(townl){
                        townl.remove(mymap);
                        townl =0;
                    }else{
                        townl = source.getLayer("geonode:town_2700").addTo(mymap);
                    }  
                }

                function addBFHVLLayer(){
                    console.log('BFHVL layer');
                    if(bfhvll){
                        bfhvll.remove(mymap);
                        bfhvll =0;
                    }else{
                        bfhvll = source.getLayer("geonode:s_ward_buffer_for_high_voltage_line_2").addTo(mymap);
                    }  
                }

                function addBFRLayer(){
                    console.log('BFR layer');
                    if(bfrl){
                        bfrl.remove(mymap);
                        bfrl =0;
                    }else{
                        bfrl = source.getLayer("geonode:s_ward_bufferforrailway").addTo(mymap);
                    }  
                }

                function addHVLLayer(){
                    console.log('HVL layer');
                    if(hvll){
                        hvll.remove(mymap);
                        hvll =0;
                    }else{
                        hvll = source.getLayer("geonode:s_ward_high_voltage_line").addTo(mymap);
                    }  
                }

                function addMRLLayer(){
                    console.log('MRLlayer');
                    if(mrll){
                        mrll.remove(mymap);
                        mrll =0;
                    }else{
                        mrll = source.getLayer("geonode:s_ward_metrorailline1_station").addTo(mymap);
                    }  
                }

                function addOSMBLayer(){
                    console.log('OSMB layer');
                    if(osmbl){
                        osmbl.remove(mymap);
                        osmbl =0;
                    }else{
                        osmbl = source.getLayer("geonode:osm_building_s_ward").addTo(mymap);
                    }  
                }

                function addPolyLayer(){
                    console.log('Polygon layer');
                    if(polyl){
                        polyl.remove(mymap);
                        polyl =0;
                    }else{
                        polyl = source.getLayer("geonode:s_ward_all_polygone").addTo(mymap);
                    }  
                }

                function addPondLayer(){
                    console.log('Pond layer');
                    if(pondl){
                        pondl.remove(mymap);
                        pondl =0;
                    }else{
                        pondl = source.getLayer("geonode:s_ward_pond").addTo(mymap);
                    }  
                }

                function addRailLayer(){
                    console.log('rail layer');
                    if(raill){
                        raill.remove(mymap);
                        raill =0;
                    }else{
                        raill = source.getLayer("geonode:s_ward_railwaytrack_station").addTo(mymap);
                    }  
                }

                
                function addLWardBuildingLayer(){
                    console.log('l ward building');
                    if(lwardbl){
                        lwardbl.remove(mymap);
                        lwardbl =0;
                    }else{
                        lwardbl = source.getLayer("geonode:l_ward_osm_building").addTo(mymap);
                    }  
                }

                function addPadsBoundaryLayer(){
                    console.log('pads boundary building');
                    if(pbl){
                        pbl.remove(mymap);
                        pbl =0;
                    }else{
                        pbl = source.getLayer("geonode:pads_bondry").addTo(mymap);
                    }  
                }

                function addPadsBuildingLayer(){
                    console.log('pads building');
                    if(pbul){
                        pbul.remove(mymap);
                        pbul =0;
                    }else{
                        pbul = source.getLayer("geonode:pads_all_buildingfootprint").addTo(mymap);
                    }  
                }

                function addPadsGardenLayer(){
                    console.log('pads garden');
                    if(pgl){
                        pgl.remove(mymap);
                        pgl =0;
                    }else{
                        pgl = source.getLayer("geonode:pads_garden").addTo(mymap);
                    }  
                }

                function addPadsStreetLayer(){
                    console.log('pads street');
                    if(psl){
                        psl.remove(mymap);
                        psl =0;
                    }else{
                        psl = source.getLayer("geonode:pads_street").addTo(mymap);
                    }  
                }

                function addPondaHospitalLayer(){
                    console.log('ponda hospital');
                    if(pondahl){
                        pondahl.remove(mymap);
                        pondahl =0;
                    }else{
                        pondahl = source.getLayer("geonode:ponda_pt_hospital").addTo(mymap);
                    }  
                }

                function addPondaSchoolLayer(){
                    console.log('ponda school');
                    if(pondasl){
                        pondasl.remove(mymap);
                        pondasl =0;
                    }else{
                        pondasl = source.getLayer("geonode:ponda_pt_school").addTo(mymap);
                    }  
                }

                function addPondaWorshipLayer(){
                    console.log('ponda worship');
                    if(pondawl){
                        pondawl.remove(mymap);
                        pondawl =0;
                    }else{
                        pondawl = source.getLayer("geonode:ponda_pt_worship").addTo(mymap);
                    }  
                }

                function addPondaFoodLayer(){
                    console.log('ponda food');
                    if(pondafl){
                        pondafl.remove(mymap);
                        pondafl =0;
                    }else{
                        pondafl = source.getLayer("geonode:ponda_pt_food_1").addTo(mymap);
                    }  
                }

                function addPondaOtherLayer(){
                    console.log('ponda other');
                    if(pondaol){
                        pondaol.remove(mymap);
                        pondaol =0;
                    }else{
                        pondaol = source.getLayer("geonode:ponda_pt_others").addTo(mymap);
                    }  
                }

                //filter functions

                function returnEagleMarker(json, latlng){
                    var att = json.properties;
                    if (att.is_the_segregation_at_source_adequate=='Yes') {
                        var clrNest = 'chartreuse';
                    } else {
                        var clrNest = 'deeppink';
                    }
                    // arEagleIDs.push(att.nest_id.toString());
                    return L.circle(latlng, {radius:10, color:clrNest}).bindTooltip("<img width=100 height=100 src='data/swm_hwest/"+att.society_photo+".jpg'/><h4>Society Name: "+att.society_name+"</h4>Segeregation at source: "+att.is_the_segregation_at_source_adequate);
                }

                function filterEagle(json) {
                    var att=json.properties;
                    var optFilter = $("input[name=fltEagle]:checked").val();
                    if (optFilter=='ALL') {
                        return true;
                    } else {
                        return (att.is_the_segregation_at_source_adequate==optFilter);
                    }
                }

                $("input[name=fltEagle]").click(function(){
                    //arEagleIDs=[];
                    buildseg.refresh();
                });

                function returnCompMarker(json, latlng){
                    var att = json.properties;
                    if (att.do_you_have_any_in_house_composting_facility=='Yes') {
                        var clrNest = 'chartreuse';
                    } else {
                        var clrNest = 'deeppink';
                    }
                    // arEagleIDs.push(att.nest_id.toString());
                    return L.circle(latlng, {radius:10, color:clrNest}).bindTooltip("<img width=100 height=100 src='data/swm_hwest/"+att.society_photo+".jpg'/><h4>Society Name: "+att.society_name+"</h4>Composting at source: "+att.do_you_have_any_in_house_composting_facility);
                }

                function filterComp(json) {
                    var att=json.properties;
                    var optFilter = $("input[name=optbcomp]:checked").val();
                    if (optFilter=='ALL') {
                        return true;
                    } else {
                        return (att.do_you_have_any_in_house_composting_facility==optFilter);
                    }
                }

                $("input[name=optbcomp]").click(function(){
                    //arEagleIDs=[];
                    buildcomp.refresh();
                });

                function returnWeightMarker(json, latlng){
                    var att = json.properties;
                    // if (att.do_you_have_any_in_house_composting_facility=='Yes') {
                    //     var clrNest = 'chartreuse';
                    // } else {
                    //     var clrNest = 'deeppink';
                    // }
                    // arEagleIDs.push(att.nest_id.toString());
                    var new_popu = att.flats * 2;
                    var new_weight = att.weight/new_popu;
                    return L.circle(latlng, {radius:10, color:"chartreuse"}).bindPopup("<img width=100 height=100 src='data/swm_hwest/"+att.society_photo+".jpg'/><h4>Society Name: "+att.society_name+"</h4>Weight: "+new_weight);
                }

                function returnCorpsegMarker(json, latlng){
                    var att = json.properties;
                    var att1 =  L.geoJSON.ajax('data/swm_hwest/swm_hwest.geojson');
                    if (turf.pointsWithinPolygon(att1, att)) {
                        var clrNest = 'chartreuse';
                    } else {
                        var clrNest = 'deeppink';
                    }
                    // arEagleIDs.push(att.nest_id.toString());
                    // return L.circle(latlng, {radius:10, color:clrNest}).bindTooltip("<img width=100 height=100 src='data/swm_hwest/"+att.society_photo+".jpg'/><h4>Society Name: "+att.society_name+"</h4>Composting at source: "+att.do_you_have_any_in_house_composting_facility);
                    return L.circle(latlng, {radius:10, color:clrNest});
                }

                function returnPuneBuildMarker(json, latlng){
                    var att = json.properties;
                    // if (att.do_you_have_any_in_house_composting_facility=='Yes') {
                    //     var clrNest = 'chartreuse';
                    // } else {
                    //     var clrNest = 'deeppink';
                    // }
                    // arEagleIDs.push(att.nest_id.toString());
                    // var new_popu = att.flats * 2;
                    // var new_weight = att.weight/new_popu;
                    return L.circle(latlng, {radius:10, color:"chartreuse"}).bindTooltip("OSM id: "+att.name);
                }

                function returnPuneRoadMarker(json, latlng){
                    var att = json.properties;
                    // if (att.do_you_have_any_in_house_composting_facility=='Yes') {
                    //     var clrNest = 'chartreuse';
                    // } else {
                    //     var clrNest = 'deeppink';
                    // }
                    // arEagleIDs.push(att.nest_id.toString());
                    // var new_popu = att.flats * 2;
                    // var new_weight = att.weight/new_popu;
                    return L.circle(latlng, {radius:10, color:"chartreuse"}).bindTooltip();
                }
            function returnPunePhotosMarker(json, latlng){
                    var att = json.properties;
                    // if (att.do_you_have_any_in_house_composting_facility=='Yes') {
                    //     var clrNest = 'chartreuse';
                    // } else {
                    //     var clrNest = 'deeppink';
                    // }
                    // arEagleIDs.push(att.nest_id.toString());
                    // var new_popu = att.flats * 2;
                    // var new_weight = att.weight/new_popu;
                    return L.circle(latlng, {radius:10, color:"chartreuse"}).bindPopup("<img width=100 height=100 src='data"+att.Path+"'/>");
                }

    </script>



{% endif %}

    {% endblock %}